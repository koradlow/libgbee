<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>XBee-Tunnel-Daemon: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">XBee-Tunnel-Daemon&#160;<span id="projectnumber">0.3.0</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('index.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">XBee-Tunnel-Daemon Documentation</div>  </div>
</div>
<div class="contents">
<div class="textblock"><p>The XBee-Tunnel-Daemon is a user space background daemon, that creates a virtual network interface (or more precisely: a TUN device) allowing to transmit UDP/IP packets over the XBee module.</p>
<p>This allows to do XBee communication using a normal socket interface.</p>
<h2><a class="anchor" id="invoking_the_xbee_tunnel_daemon"></a>
Invoking the XBee-Tunnel-Daemon</h2>
<p>Do not call the XBee-Tunnel-Daemon directly. Instead use the <em>xbee-tunnel-control</em> script with the <em>start</em> option to start the daemon or with the <em>stop</em> option to stop the daemon. Note, that you will need <em>root</em> privileges to start the XBee-Tunnel-Daemon.</p>
<p>The XBee-Tunnel-Daemon needs to be configured with the following parameters:</p>
<table class="doxtable">
<tr>
<td>-i, --inet </td><td>IP address to assign to the network interface, e.g. <em>10.10.123.123</em>. Note, that the XBee-Tunnel-Daemon uses a /16 network (netmask 255.255.0.0). The network part of the IP address is used as PAN ID of the XBee module and the host part of the IP address is used as the XBee module's 16-bit address.   </td></tr>
<tr>
<td>-s, --serial </td><td>Name of the serial interface the XBee module is connected to, e.g. <em>/dev/ttyUSB0</em>.   </td></tr>
<tr>
<td>-v, --verbose </td><td>Optional. Enables verbose output; note, that the XBee-Tunnel-Daemon logs all output to the syslog.  </td></tr>
</table>
<p>You can write these parameters into a configuration file named <em>xbee-tunnel-rc</em> and put this configuration file either in your <em>home</em> directory or into the XBee-Tunnel-Daemon's working directory. You can create the configuration file with the following command: </p>
<div class="fragment"><pre class="fragment"> echo <span class="stringliteral">&quot;--inet=$IP_ADDRESS --serial=$SERIAL_DEVICE_NAME&quot;</span> &gt; .xbee-tunnel-rc
</pre></div><p>For more information on UDP/IP tunneling through your XBee module, please refer to <a class="el" href="udp_ip_tunneling_details.html">UDP/IP Tunneling Details</a>.</p>
<p>For instructions to build the XBee-Tunnel-Daemon, please refer to <a class="el" href="build_instructions.html">Build Instructions</a>.</p>
<h2><a class="anchor" id="sending_and_receiving_data"></a>
Sending and Receiving Data</h2>
<p>The XBee-Tunnel-Daemon allows to use a normal socket interface to send and receive data in your application. So first, create a socket with the following parameters: </p>
<div class="fragment"><pre class="fragment"> s = socket(PF_INET, SOCK_DGRAM, IPPROTO_UDP);
</pre></div><p>Then initialize a socket address structure with the address of your local host: </p>
<div class="fragment"><pre class="fragment"> <span class="keyword">struct </span>sockaddr_in host;
 localHost.sin_family = AF_INET;
 localHost.sin_addr.s_addr = $YOUR_IP_ADDRESS
 localHost.sin_port = $DESTINATION_PORT_NUMBER
</pre></div><p>Now send the data to the remote host with: </p>
<div class="fragment"><pre class="fragment"> sendto(s, dataPtr, dataLength, 0, &amp;localHost, <span class="keyword">sizeof</span>(localHost));
</pre></div><p>To receive data from the XBee module, call: </p>
<div class="fragment"><pre class="fragment"> length = recvfrom(s, dataPtr, maxLength, 0, &amp;remoteHost, &amp;hostLength);
</pre></div><p>Note, as of yet there are still some limitations regarding UDP/IP tunneling through your XBee. Refer to <a class="el" href="limitations.html">Limitations</a> to get an overview. </p>
</div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="footer">Generated on Tue Apr 19 2011 22:24:19 for XBee-Tunnel-Daemon by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


</body>
</html>
