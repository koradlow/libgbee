<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>LibGBee: Porting</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">LibGBee
   &#160;<span id="projectnumber">0.3.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('porting.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Porting </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="porting"></a>
Porting</h1>
<p>A libgbee port provides access to the serial interface and some platform dependent functions. The libgbee uses macros to access the functions provided by the port. These macros must be defined in the file gbee-port.h for each port. Following macros are mandatory:</p>
<h2><a class="anchor" id="gbee_port_uart_connect"></a>
GBEE_PORT_UART_CONNECT</h2>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> gbeePortConnect(<span class="keyword">const</span> <span class="keywordtype">char</span> *deviceName);</div>
</div><!-- fragment --><p> to connect to the serial interface. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">deviceName</td><td>is the name of the UART (e.g. "/dev/ttyS0") passed by the calling application to the <a class="el" href="gbee_8c.html#a682ed139fa35029edfa67210ea940466">gbeeCreate()</a> function. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A port-dependent device handle of the UART.</dd></dl>
<h2><a class="anchor" id="gbee_port_uart_disconnect"></a>
GBEE_PORT_UART_DISCONNECT</h2>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> gbeePortDisconnect(<span class="keywordtype">int</span> deviceIndex);</div>
</div><!-- fragment --><p> to disconnect from the serial interface. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">deviceIndex</td><td>is the device index returned by the call to GBEE_PORT_UART_CONNECT.</td></tr>
  </table>
  </dd>
</dl>
<h2><a class="anchor" id="gbee_port_uart_receive_byte"></a>
GBEE_PORT_UART_RECEIVE_BYTE</h2>
<div class="fragment"><div class="line"><a class="code" href="gbee-port-interface_8h.html#ae2e5056d93089ecf91e502fae511fad9">GBeeError</a> gbeePortReceiveByte(<span class="keywordtype">int</span>       deviceIndex,</div>
<div class="line">                              uint8_t  *byte,</div>
<div class="line">                              uint32_t  timeout);</div>
</div><!-- fragment --><p> to receive a byte from the serial interface. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">deviceIndex</td><td>is the device index returned by the call to GBEE_PORT_UART_CONNECT. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">byte</td><td>is the received byte. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout</td><td>specifies a timeout in milliseconds. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">GBEE_NO_ERROR</td><td>if successful. </td></tr>
    <tr><td class="paramname">GBEE_TIMEOUT_ERROR</td><td>if the timeout expired without any data received. </td></tr>
    <tr><td class="paramname">GBEE_RS232_ERROR</td><td>to indicate an error to establish serial communication.</td></tr>
  </table>
  </dd>
</dl>
<h2><a class="anchor" id="gbee_port_uart_send_buffer"></a>
GBEE_PORT_UART_SEND_BUFFER</h2>
<div class="fragment"><div class="line"><a class="code" href="gbee-port-interface_8h.html#ae2e5056d93089ecf91e502fae511fad9">GBeeError</a> gbeePortSendBuffer(<span class="keywordtype">int</span>            deviceIndex,</div>
<div class="line">                             <span class="keyword">const</span> uint8_t *buffer,</div>
<div class="line">                             uint32_t       length);</div>
</div><!-- fragment --><p> to send a block of data to the serial device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">deviceIndex</td><td>is the device index returned by the call to GBEE_PORT_UART_CONNECT. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">buffer</td><td>points to the data to send. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">length</td><td>is the number of bytes to send. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">GBEE_NO_ERROR</td><td>to indicate success. </td></tr>
    <tr><td class="paramname">GBEE_RS232_ERROR</td><td>to indicate a failure establishing serial communication.</td></tr>
  </table>
  </dd>
</dl>
<h2><a class="anchor" id="gbee_port_memory_alloc"></a>
GBEE_PORT_MEMORY_ALLOC</h2>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> *gbeePortMemoryAlloc(<span class="keywordtype">size_t</span> size);</div>
</div><!-- fragment --><p> to allocate a block of memory (same as malloc). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>is the number of bytes to allocate. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the allocated memory.</dd></dl>
<h2><a class="anchor" id="gbee_port_memory_copy"></a>
GBEE_PORT_MEMORY_COPY</h2>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> *gbeePortMemoryCopy(<span class="keywordtype">void</span>       *dest,</div>
<div class="line">                         <span class="keyword">const</span> <span class="keywordtype">void</span> *src,</div>
<div class="line">                         <span class="keywordtype">size_t</span>      size);</div>
</div><!-- fragment --><p> to copy a block of memory (like memcpy). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">dest</td><td>points to the memory to copy to. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">src</td><td>points to the memory to copy from. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>is the number of bytes to copy. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the destination memory.</dd></dl>
<h2><a class="anchor" id="gbee_port_time_get"></a>
GBEE_PORT_TIME_GET</h2>
<div class="fragment"><div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="gbee-linux_8c.html#a173f187b920a3d82d068b6ecbf4d4afc">gbeePortTimeGet</a>(<span class="keywordtype">void</span>);</div>
</div><!-- fragment --><p> to get a timestamp (in milliseconds). </p>
<dl class="section return"><dt>Returns</dt><dd>The current time in milliseconds.</dd></dl>
<p>Additionally, there are some optional functions, which may be defined by a port. If you do not want to provide these functions in your port you should undef the corresponding macro. Following optional functions may be defined:</p>
<h2><a class="anchor" id="gbee_port_memory_free"></a>
GBEE_PORT_MEMORY_FREE</h2>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> gbeePortMemoryFree(<span class="keywordtype">void</span> *ptr);</div>
</div><!-- fragment --><p> to free an allocated block of memory. Note, that this function is optional, as on some embedded systems without heap management it may not be possible to free allocated memory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ptr</td><td>is a pointer to the allocated memory to free.</td></tr>
  </table>
  </dd>
</dl>
<h2><a class="anchor" id="gbee_port_debug_log"></a>
GBEE_PORT_DEBUG_LOG</h2>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> gbeePortDebugLog(<span class="keyword">const</span> <span class="keywordtype">char</span> *format, ...);</div>
</div><!-- fragment --><p> to log debug messages to the console (like printf). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">format</td><td>is a pointer to the printf-style format string. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">...</td><td>are additional parameters to be printed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of characters printed.</dd></dl>
<h2><a class="anchor" id="little_big_endian"></a>
Little or Big Endian</h2>
<p>Additionally, each port must either define the symbol GBEE_PORT_BIG_ENDIAN or GBEE_PORT_LITTLE_ENDIAN, depending on the byte-order used by target system.</p>
<h2><a class="anchor" id="port_interface"></a>
Port Interface</h2>
<p>All types you need for writing an own port are defined in <a class="el" href="gbee-port-interface_8h.html">gbee-port-interface.h</a>. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Nov 8 2012 12:25:15 for LibGBee by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.1.2 </li>
  </ul>
</div>
</body>
</html>
